local snakes_ascii = [[
    ▒▒░░░░░▒░▒▒░░▒░░░▒▒▒▒▒░░░░░░░░▒▒▒▒▒▒░▒▒░▒▒▒▒▒▒░░▒▒▒▒▒▒▒▒▒▒░▒▒▒▒▒▒▒░▒▒▒▒▒▒▒▒▒▓▒▒▒▒▒▒▓██████
	▒▒▒▒▒▒▒░▒▒░░▒░░▒▒▒▒▒▒▒░░▒▒░▒▒▒▒▒▒░▒▒░▒▒░▒▒▒▒▒▒░▒▒▒▒▓▒▒▒▓▒▒░▒▒▒▒▒▒▒░▒▓▒▒▒▒▒▒▒▒▓▒▒▒▒▒▒▓█████
    ▓█████▓▒▒░▒░▒░░▒▒▒▒▒▒░░▒░▒▒▒▒▒▒▒▒▒░▒▒▒▒▒▒▒▒▓▒▒░▒▒▒▓▒▒▒▒▒▒▒░▒▒▒▒▒▒▒░▒▓▒▒▒▒▒▒░▒▓▓▒▒▓▒▒▓█████
	██████▒▒░▒▒░▒░▒▒▒▒▒▒▒░░▒░▒▒▒▒▒▒▒▒▒░▒░▒▒▒▒▒▒▒▒▒▒▒▒▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░▒▓▒▒▒▒▒▒░░▒▓▒▒▓▒▒▒█████
	██████▒▒▒▒░▒▒░▒▒▒▒▒▒▒░▒▒▒▒▒▒▒▒▒▒▒▒░▒░▒▒▒▒▒▓▒▒▒▒▒▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓▒▒▒▒▒▓░░░▒▓▒▒▓▒▒▓████
	██████▒▒▒▒░▒░▒▒▒▒▒▒▒▒▒░░▒▒▒▒▒▒▒▒▒▒░▒▒▒░▒▒▒▓▒▒▒▒▒▓▓▒▒▒▒░▒▒▒▒▒▒▒▒▒▒▒▒▓▓▒▒▒▒▒▓▒░░▒▒▓▒▓▒▒▓████
	█████▓▒▒▒▒░▒░▒░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▒▒▒▒▒▓▓▒▒▒▒░░▒▒▒▒▒▒▒▒▓▒▒▒▓▓▒▒▒▒▒▓▒░░░▒▓▒▓▒▒▓████
	█████▒▒▒░░▒▒░▒▒▒▒▒▒▒▒░▒▒▒▒▒▒▒▒▒▒▒░▒▒░▒▒▒▒▓▓▒▒▒▓▓▒▒▒▒░░░▒▒▒▒▒▒▒▒▓▒▒▓▓▓▒▓▒▒▒▓▒░░░░▒▓▓▒▒▒████
	█████▒▒▒▒░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░▒▒▒▒▒▒▒▓▓▒▒▓▓▒▒▒▒▒░░░▒▓▒▒▒▒▒▓▓▒▒▓▓▒▒▒▒▒▒▒▒░░░░▒▓▓▓▒▒▓███
	████▒▒▒▒▒▒░▒▒░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░▒▒▒▒▒▒▒▓▓▒▒▓▒▒▓▓▒░░░░▒▒▒▒▒▒▒▓▒▒▒▓▓▒▓▓▒▒▒▒▒░░░░▒▓▓▓▒▒▓███
	████▒▒▒░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░▒▒▒▒▒▒▒▓▓▒▓▒▒▒▓▓▒▒▒▒▒▒▓▒▒▒▒▒▓▒▓▒▓▓▓▓▒▒▒░▒░░░░░░▓▓▓▒▒▓███
	████▒▓▒▒▒▒▒░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓▓▓▒▒▒▒▓▒░░░░▒▒▒▒▒▒▒▓▓▓▓▒▓▓▓▓▒▒▒▒▒▒▒░▒▒░▓▓▓▒▒▓███
	███▓▒█▒▒▒░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓▒▒▒▒▒▒▒▒▒▒▒▓▓▓▒░░▒▒▒░░░░░▒▒▒▒▒▒▒▓▓▓▒▒▓▒▓▓▒▒▓▓▓▓▓▓▓▓▓▓▓▓▒░▓███
	███▒▒█▒░▒▒▒▒▒▒▒▒▓▓▒▒▓▓▒▓▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒▒▓▓▒░░▒▒▓▒▒▒▒▒░░▒▒▒▒▒▒▒▓▒▒▓▒▒▒░▓▓▓▓▓▓▓▒▒▓▒▓▓▓▒░▓███
	███▒▓█▒▒▒▒▒▒▒▒▒▒▒▓▒▓▓▓▓▓▓▓▓▒▒▒▓▒▒▒▒▒▒▒▒▓▓▒░░▒▓▒▒░░▒▒▒░░░▒▒▒░░░░░░░░░░▒▒░▒▓▒▒▓░░▒▒▓▓▓▒░▓███
	███▒▓█▒▒▒▒▒▒▒▒▒▒▓▓▒▒▒▒▒▒▓▓▓▓▓▓▓▒▒▒▒▒░▒▒▓▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▒░░░░░░░░░░░░░░▒▒▒▒▒▒▒░▒░▒█▓▓▒▒▓███
	███▓▓█▒▒▒▒▒▒▒▒▒▒▓▒░▒▒▒▒▒░░▒▓▓▓▓▒▒▒▒▒▒▒▒▓▓▓▓▓▒▒▒▒▓▓▓▓▓▓▒▒▒░░░░░░░░░░░░░▒▒▒░░▒░▒▒░▒█▓▓▒▒████
	███▓▓▓▒▒▒▒▒▒▒▒▒▒▓▒▒▒▒▒▒▒▒▒░▒▒▓▒▒▒▒▒▒▒▒▒▓▒▒▒▒░░▒▒█▓▒▒▒▒░░░░░░░░░░░░░░░░░░▒▒▒▒▒░░░▒█▓▓▒▒████
	███▓▓▒▒▒▒▒▒▒▒▒▒▒▓▒░▒▒▒▒▓▓▓▒▒▒▓▒▒▒▒▒▒▒▒▒▓▒░░▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░▓█▓▓▒▒████
	████▓▒▒▒▒▒▒▒▒▒▒▒▓▓░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░▒▒▒░░▒▒▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░▓█▓▓▒▒████
	████▓▒▒▒▒▒▒▒▒▒▒▓▓▓▓▒░▒▒▒▒▓▒▒▒▒▒▒▒▒▒▒▒▒▒▓▒░░▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▓█▓▓▒▒████
	████▓▒▒▒▒▓▒▒▒▒▒▓▓▓▓▓▓░░▒▒▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒░░░░░░░░░░░▒█▓▓▒▓████
    ████▓▒▒▒▒▓▒▒▒▒▒▓▓▓▓▓▓▓▓▒▒░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒░░░░░░░░░▒▒█▓▓▒█████
	████▒▒▒▒▒▒▒▒▒▒▒▓▓▒▓▓▓▓▓▓▓▓▓▒░▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒█▓▓▒█████
	████▒▒▒▒▒▒▒▒▒▒▒▓▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒▓▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▓▒▒▓▓▒█████
	████▒▒▒▒▒▒▒▒▒▒▓▓▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▓▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▓▓▒▒▓▓▒█████
    ███▒▒▒▒▓▒▒▒▒▒▒▓▓▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▓▒▒▒▒▒▓░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▓▓▓▒▒▓▒▓█████
	███▒▒▒▒█▒▒▒▒▒▒▓▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▓▒▒▒▒▒▓▒▒░░░░░░░░░░░░░░░░░░░░░░░░░▒▒░░░░░▒▓▓▓▓▒▓▓▒██████
	██▓▒▒▒▓█▓▒▒▒▒▒▓▒▒▓▓▓▓▓▒▓▓▓▓▓▓▓▓▒▒▓▒▒▒▒▓▒▓▒▒░░░░░░░░░░░░░░░░░░▒░░░░░░░░░░░░▓█▓▓▓▓▓▓▓▒██████
	██▒▒▒▒██▓▒▒▒▒▓▓▒▒▓▓▓▓▓▒▒▓▓▓▓▓▓▓▓▓▒▒▓▒▒▒▒▓▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░░░░░░░▒▓███▓▓▓▓▓▓███████
    ██▒▒▒▓██▓▒▒▒▒▓▒▒▒▓▓▓▓▓▒▒▒▓▓▓▓▓▓▓▓▓▒▓▒▒▒▒▒▓▒▒▒▒▒▒▓▒▒▒░░░░░░░░░░░░░░░░░░░▒▒▓███▓▓▓▓▓▒███████
	█▒▒▒▒████▒▒▒▒▓▒▒▒▓▓▓▓▓▒▒▒▓▓▓▓▓▓▓▓▓▒▓▓▒▒▒▒▓▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░▒▒▒▒▓███▓▓▓▓▓▒███████
	█▒▒▒▓████▒▒▒▒▓▒▒▒▓▓▓▓▓▒▒▒▓▓▓▓▓▓▓▓▓▒▒▓▒▓▒▒▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▒▒░░░░░░░▓▓▒▒▓▓███▓▓▓▓▓▓███████
	▒▒▒▓████▓▒▒▒▓▓▒▒▒▓▓▓▓▓▒▒▒▓▓▓▓▓▓▓▓▓▓▒▓▓▓▒▒▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓▓▓▓▓▓▓▓▓▒▒▒▓▓███▓▓▓▓█▓▓██████
	▒▒▒█████▒▒▒▒▓▓▒▒▒▓▓▓▓▒▒▒▒▓▓▓▓▓▓▓▓▓▓▒▒▓▓▓▒▓▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓▓▓▓▓▓▓▓▓▒▒▒▓████▓▓▓▓█▓▓██████
	▒▒▓█████▒▒▒▒▓▒▒▒▓▓▓▓▓▒▒▒▓▓▓▓▓▓▓▓▓▓▓▓▒▓▓▓▒▒▓▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒▒▓▓▓▓▓▓▓▓▓▓▒▒▒▓████▓▓▓▓█▓▒██████
	▒▒██████▒▒▒▒▓▒▒▒▓▓▓▓▓▒▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▒▓▓▓▒▓▓▓▓▓▓▓▒▒▒▒▒▒▒▒▒▒▓▓▓▓▓▓▓▓█▓▓▒▒▓████▓▓▓▓█▓▒██████
	▒▓██████▒▒▒▓▓▒▒▒▓▓▓▓▓▒▒▓▓▓▓▓▓▓▓░░░░░▒▓▒▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒▒▒▒▒▒▓▓▓▓▓▓▓▓▓▓█▓▓█████▓▓▓▓█▓▓██████
	▒██████▓▒▒▒▓▓▒▒▒▓▓▓▓▒▒▒▓▓▓▓▓▓▓▓▓▒▒▒▒░░▒▓▓▓▒▓▓▓▓▓▓▓▓▓▓▓▒▒▒▒▒▓▓▓▓▓▓▓▓▓▓▓▓█▒████▓▓▓▓██▓██████
	▓██████▒▒▒▒▓▓▒▒▒▓▓▓▓▒▒▓▓▓▒░░░░░░░░▒▓▓▓▓▒▓▓▓▒▒▓▓▓▓▓▓▓▓▓▓▓▒▒▒▒▒▒▓▓▓▓▓▓▓▓▓▓▒▒███▓▓▓▓██▓██████
	███████▒▒▒▓▓▓▒▒▒▓▓▓▓▒▒▓▒▒████████▓▒░░░▒▒▓▓▓▓▓▒▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▓▒▓▓▓▓▓▓▓▒░▒▓█▓▓▓▓██▓██████
	███████▒▒▒▓▓▓▒▒▓▓▓▓▓▒▒▒██████████████▓▒░░░▒▓▓▓▒░░░░▒▓▓▓▓▓▓▓▓▒▒▒▒▒▒▒▓▓▓▓▒░░░▒▒▓▓▓▓██▓██████
	███████▒▒▓▓▓▓▒▒▓▓▓▓▒▒▓███████████████████▒░░▒▓▓▓▓▒░░░░▒▒▓▓▓▓▓▓▒▒▒▒▒▒█▓▒░░░░░▒▓▓▓▓██▓██████
	██████▓▒▒▓▓▓▓▒▒▓▓▓▓▒▓███████████████████████▒░▒▒▓▓▓▒▒░░░░░░▒▒▒▓▓▓▒▓███▒░░░░░░▒▓▓▓██▓██████
	██████▒▒▒▓▓▓▓▒▒▓▓▓▓▒▓██████████████████████████░░░░▒▓▓▒░░░░░░░░░░▒██████░░░░░░▒▓▓██▓██████
	██████▒▒▒▓▓▓▓▒▒▓▓▓▓▓█████████████████████████████▓░░░▒▓▓▓▒░░░░░░░░░░▓████▒░░░░░▒▓██▓██████
	██████▒▒▓▓▓▓▓▒▒▓▓▓▓▓████████████████████████████████░░░░▓▓▓▒░░░░░░░░░░▒███▒░░░░░▒██▓██████
	██████▒▒▓▓▓▓▓▒▒▓▓▓▓▓██████████████████████████████████▒░░░▒▓▓▓▒░░░░░░░░░▒██▒▒▓▓▓▓██▓██████
	██████▒▒▓█▓▓▓▓▓▓▓▓▓▓████████████████████████████████████▓░░░░▒▓▓▒░░░░░░░░░▓█▓▓▒░░▒▓▓██████
]]

local function remove_duplicate_docs()
	local doc_dir = vim.fn.stdpath("data") .. "/lazy/snacks.nvim/doc"
	local duplicate = doc_dir .. "/snacks.nvim-animate.txt"
	local keep = doc_dir .. "/snacks-animate.txt"
	local uv = vim.uv or vim.loop
	if not uv then
		return
	end
	if uv.fs_stat(duplicate) and uv.fs_stat(keep) then
		pcall(vim.fn.delete, duplicate)
	end
end

return {
    "folke/snacks.nvim",
    priority = 1000,
    lazy = false,
    init = remove_duplicate_docs,
    build = remove_duplicate_docs,
    opts = {
        -- Enable these features
        bigfile = { enabled = true },
        notifier = { enabled = true },
        quickfile = { enabled = true },
        statuscolumn = { enabled = true },
        words = { enabled = true },

        -- Git integration
        gitbrowse = { enabled = true },

        -- Terminal
        terminal = { enabled = true },

        -- Lazygit integration
        lazygit = { enabled = true },

        -- Rename with LSP support
        rename = { enabled = true },

        -- Dashboard (replaces alpha)
        dashboard = {
            enabled = true,
            width = 110,
            sections = {
                { section = "header" },
                { section = "keys",   gap = 1, padding = 1 },
                { section = "startup" },
				{
					pane = 2,
					text = {
						{ snakes_ascii, hl = "SnacksDashboardTerminal" },
					},
					align = "left",
					enabled = function()
						return vim.o.columns >= 120
					end,
				},
			},
		},
	},
    keys = {
        {
            "<leader>gg",
            function()
                Snacks.lazygit()
            end,
            desc = "Lazygit",
        },
        {
            "<leader>gb",
            function()
                Snacks.git.blame_line()
            end,
            desc = "Git Blame Line",
        },
        {
            "<leader>gB",
            function()
                Snacks.gitbrowse()
            end,
            desc = "Git Browse",
        },
        {
            "<leader>gf",
            function()
                Snacks.lazygit.log_file()
            end,
            desc = "Lazygit Current File History",
        },
        {
            "<leader>gl",
            function()
                Snacks.lazygit.log()
            end,
            desc = "Lazygit Log",
        },
        {
            "<leader>cR",
            function()
                Snacks.rename.rename_file()
            end,
            desc = "Rename File",
        },
        {
            "<c-/>",
            function()
                Snacks.terminal()
            end,
            desc = "Toggle Terminal",
        },
        {
            "<c-_>",
            function()
                Snacks.terminal()
            end,
            desc = "Toggle Terminal",
        }, -- for some terminals
    },
}
